import{M as R}from"./MainLayout-DI_McI5I.js";import{a as v}from"./AddNotification-NyjqDbEZ.js";import{s as S}from"./Helpers-DvfwWfi1.js";import{d as A,r as g,q as U,p as T,s as y,o as f,c as V,b as o,k as l,e as i,v as j,t as u,u as x,D as N,_ as q,m as b,i as I,j as Q,h as E,V as P,f as w,y as H,a5 as L,g as G}from"./app-CB06vJSy.js";import"./Notifications.vue_vue_type_style_index_0_lang-DOp5nevM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const J={class:"text-body-2 main-text pr-5 pr-md-0 pt-3"},K={class:"text-body-2","pr-5":"","pr-md-0":""},W={key:0,class:"text-body-2 pr-5 pr-md-0 pb-3"},X={class:"text-body-2 text-center main-text"},Y={class:"d-flex justify-center"},Z={class:"d-flex align-center quantity-field"},ee={key:0,class:"text-body-2 text-center main-text"},te=A({__name:"CartItemsTable",props:{items:{},itemsModifiers:{},loading:{},loadingModifiers:{}},emits:["update:items","update:loading"],setup(h){const d=g(1),r=g(5),c=g(0),n=U(h,"items"),e=U(h,"loading"),{smAndDown:p,smAndUp:D,mdAndUp:k}=T(),z=y(()=>k.value?100:70),B=y(()=>{const s=[{key:"image"},{title:"",key:"name"},{key:"quantity"}];return k.value&&s.push({key:"price"},{key:"subtotal"}),s.push({title:"",key:"remove"}),s}),C=y(()=>D.value?"small":"x-small");function F(s){e.value=!0,axios.delete(route("cart.remove-from-cart",{product_id:s.product.id})).then(a=>{n.value.splice(n.value.indexOf(s),1),v(a.data.message,"success"),$()}).catch(a=>{console.error(a),v("A apărut o eroare neașteptată în timpul editarea coșului dvs.","error")}).finally(()=>{e.value=!1})}function $(){axios.get(route("cart.fetch-items",{page:d.value,per_page:r.value})).then(s=>{n.value=s.data.data,c.value=s.data.meta.total}).catch(s=>{console.error(s),v("A apărut o eroare neașteptată în timpul încărcării datelor","error"),n.value=[],c.value=1}).finally(()=>{e.value=!1})}function M(s){++s.quantity,_(s)}function O(s){--s.quantity,_(s)}const _=debounce(s=>{e.value=!0,axios.put(route("cart.update"),{product_id:s.product.id,quantity:s.quantity}).then(a=>{v(a.data.message,"success")}).catch(a=>{console.error(a),v("A apărut o eroare neașteptată în timpul editarea coșului dvs.","error")}).finally(()=>{e.value=!1})},400);return(s,a)=>(f(),V(Q,{page:d.value,"onUpdate:page":a[0]||(a[0]=t=>d.value=t),"items-per-page":r.value,"onUpdate:itemsPerPage":a[1]||(a[1]=t=>r.value=t),class:"cart-items-table",headers:B.value,items:n.value,"items-length":c.value,"first-icon":"","last-icon":"","hide-default-footer":c.value<=10,"disable-sort":"","onUpdate:options":$},{"header.image":o(({column:t})=>a[2]||(a[2]=[l("p",{class:"text-h6 main-text"},"Produs",-1)])),"header.price":o(({column:t})=>a[3]||(a[3]=[l("p",{class:"text-h6 text-center main-text"},"Preț",-1)])),"header.quantity":o(({column:t})=>a[4]||(a[4]=[l("p",{class:"text-h6 text-center main-text"},"Cantitate",-1)])),"header.subtotal":o(({column:t})=>a[5]||(a[5]=[l("p",{class:"text-h6 text-center main-text"},"Subtotal",-1)])),"item.image":o(({item:t})=>[i(j,{class:"my-3",src:t.product.image_src,height:z.value,width:z.value,cover:""},null,8,["src","height","width"])]),"item.name":o(({item:t})=>[l("p",J,u(x(S)(t.product.name)),1),l("p",K,u(t.size)+" "+u(t.color),1),x(p)?(f(),N("p",W,u(t.product.price)+" RON ",1)):q("",!0)]),"item.price":o(({item:t})=>[l("p",X,u(t.product.price)+" RON",1)]),"item.quantity":o(({item:t})=>[l("div",Y,[l("div",Z,[i(b,{icon:"mdi-minus-thick",size:C.value,elevation:"0",disabled:e.value||t.quantity<=1,loading:e.value,onClick:m=>O(t)},null,8,["size","disabled","loading","onClick"]),i(I,{modelValue:t.quantity,"onUpdate:modelValue":m=>t.quantity=m,onChange:m=>x(_)(t),type:"number",class:"m-0 text-body-2 main-text text-center",rounded:"0","hide-spin-buttons":"","hide-details":"","center-affix":"",density:"compact",disabled:e.value,loading:e.value},null,8,["modelValue","onUpdate:modelValue","onChange","disabled","loading"]),i(b,{icon:"mdi-plus-thick",size:C.value,elevation:"0",disabled:e.value,loading:e.value,onClick:m=>M(t)},null,8,["size","disabled","loading","onClick"])])])]),"item.subtotal":o(({item:t})=>[x(k)?(f(),N("p",ee,u((t.product.price*t.quantity).toFixed(2))+" RON ",1)):q("",!0)]),"item.remove":o(({item:t})=>[i(b,{icon:"mdi-close-thick",size:C.value,color:"error",elevation:"0",disabled:e.value,loading:e.value,onClick:m=>F(t)},null,8,["size","disabled","loading","onClick"])]),"no-data":o(()=>a[6]||(a[6]=[l("p",{class:"text-body-1 pt-12 pb-8"},"Coșul este gol",-1)])),_:1},8,["page","items-per-page","headers","items","items-length","hide-default-footer"]))}}),ae={class:"p-5"},se={class:"d-flex justify-between"},oe={class:"text-body-1 main-text"},le={class:"px-4 pb-4"},pe=A({__name:"Cart",setup(h){const d=g([]),r=g(!1),c=y(()=>d.value.reduce((n,e)=>n+e.quantity*e.product.price,0).toFixed(2));return(n,e)=>(f(),V(R,null,{default:o(()=>[i(G,null,{default:o(()=>[i(E,{class:"justify-center large-top-section-separator"},{default:o(()=>[i(P,{cols:"12",lg:"9"},{default:o(()=>[i(w,{class:"pb-4",rounded:"0"},{default:o(()=>[i(te,{items:d.value,"onUpdate:items":e[0]||(e[0]=p=>d.value=p),loading:r.value,"onUpdate:loading":e[1]||(e[1]=p=>r.value=p)},null,8,["items","loading"])]),_:1})]),_:1}),d.value.length>0?(f(),V(P,{key:0,cols:"12",sm:"8",md:"6",lg:"3"},{default:o(()=>[i(w,{rounded:"0",tonal:""},{default:o(()=>[e[5]||(e[5]=l("p",{class:"text-h6 text-uppercase main-text py-3 px-5"},"Coș total",-1)),i(H,{thickness:1,opacity:"100"}),l("div",ae,[l("div",se,[e[3]||(e[3]=l("p",{class:"text-body-1 main-text"},"Preț total",-1)),l("p",oe,u(c.value)+" RON",1)])]),l("div",le,[i(b,{class:"mb-3 w-100",size:"x-large",disabled:r.value,loading:r.value,onClick:e[2]||(e[2]=p=>x(L).visit(n.route("cart.checkout")))},{default:o(()=>e[4]||(e[4]=[l("p",{class:"text-uppercase text-body-1 main-text"},"Finalizează comanda",-1)])),_:1},8,["disabled","loading"])])]),_:1})]),_:1})):q("",!0)]),_:1})]),_:1})]),_:1}))}});export{pe as default};
