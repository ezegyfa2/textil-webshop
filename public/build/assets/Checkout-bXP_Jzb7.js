import{d as N,T as R,r as U,s as B,o as i,c as u,b as o,e as l,h as f,V as c,f as g,z as L,x as T,A as q,B as w,C as F,i as m,u as e,a6 as P,m as V,k as n,y as b,J as D,D as j,Q as z,P as A,K as x,t as p,_,l as E,g as M,v as O}from"./app-CQD9cFlp.js";import{M as S}from"./MainLayout-Br7jclMR.js";import{a as I}from"./AddNotification-2Rtx2n4D.js";import{n as y,e as J,a as K,m as Q,b as G,c as H}from"./ValidationRules-DlUvOQ2l.js";import"./Notifications.vue_vue_type_style_index_0_lang-VHMnjnpo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"d-flex align-start justify-between py-2"},X={class:"d-flex pr-7"},Y={class:"text-body-2 main-text mb-2"},Z={class:"text-body-2 main-text"},$={class:"text-body-2 main-text"},ee={class:"text-body-1 main-text"},se={class:"p-5"},ae={class:"d-flex justify-between"},le={class:"text-h6 main-text"},ue=N({__name:"Checkout",props:{items:{},first_name:{},last_name:{},email:{},phone:{},company_name:{},address:{},postal_code:{}},setup(h){const d=h,s=R({first_name:d.first_name,last_name:d.last_name,email:d.email,phone:d.phone,company_name:d.company_name,address:d.address,postal_code:d.postal_code}),v=U(!1),C=B(()=>d.items.reduce((r,a)=>r+a.quantity*a.product.price,0).toFixed(2));function k(){s.transform(r=>(r.phone&&(r.phone.length==10&&(r.phone="+4"+r.phone),r.phone=r.phone.replaceAll(" ","")),r)).post(route("cart.store-order"),{preserveScroll:!0,onError:r=>{console.log(r),I("A apărut o eroare neașteptată în timpul plasarea comenzii dvs.","error"),v.value=!1}})}return(r,a)=>(i(),u(S,null,{default:o(()=>[l(M,null,{default:o(()=>[r.items.length>0?(i(),u(f,{key:0,class:"justify-center top-section-separator"},{default:o(()=>[l(c,{cols:"12",md:"6",lg:"8"},{default:o(()=>[l(g,{rounded:"0"},{default:o(()=>[l(L,{class:"text-h5 main-text text-uppercase ml-3 mt-2 mb-8"},{default:o(()=>a[7]||(a[7]=[T(" Detalii de facturare ")])),_:1}),l(q,null,{default:o(()=>[l(w,{onSubmit:F(k,["prevent"]),class:"text-end"},{default:o(()=>[l(m,{modelValue:e(s).first_name,"onUpdate:modelValue":a[0]||(a[0]=t=>e(s).first_name=t),counter:250,label:" * Prenume",rules:e(y),disabled:e(s).processing,loading:e(s).processing,required:"","error-messages":e(s).errors.first_name},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(m,{modelValue:e(s).last_name,"onUpdate:modelValue":a[1]||(a[1]=t=>e(s).last_name=t),counter:250,label:" * Nume",rules:e(y),disabled:e(s).processing,loading:e(s).processing,required:"","error-messages":e(s).errors.last_name},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(m,{modelValue:e(s).email,"onUpdate:modelValue":a[2]||(a[2]=t=>e(s).email=t),counter:250,label:" * Email",rules:e(J),disabled:e(s).processing,loading:e(s).processing,required:"",type:"email","error-messages":e(s).errors.email},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(m,{modelValue:e(s).phone,"onUpdate:modelValue":a[3]||(a[3]=t=>e(s).phone=t),label:"Număr de telefon",rules:e(K),disabled:e(s).processing,loading:e(s).processing,type:"tel","error-messages":e(s).errors.phone},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(m,{modelValue:e(s).company_name,"onUpdate:modelValue":a[4]||(a[4]=t=>e(s).company_name=t),counter:250,label:"Denumirea companiei",rules:[e(Q)],disabled:e(s).processing,loading:e(s).processing,"error-messages":e(s).errors.company_name},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(P,{modelValue:e(s).address,"onUpdate:modelValue":a[5]||(a[5]=t=>e(s).address=t),counter:500,label:"Adresa",rules:[e(G)],disabled:e(s).processing,loading:e(s).processing,"error-messages":e(s).errors.address},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(m,{modelValue:e(s).postal_code,"onUpdate:modelValue":a[6]||(a[6]=t=>e(s).postal_code=t),counter:10,label:"Cod postal","hide-spin-buttons":"",rules:[t=>e(H)(t,10)],disabled:e(s).processing,loading:e(s).processing,type:"number","error-messages":e(s).errors.postal_code},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(V,{class:"mb-3",size:"x-large",type:"submit"},{default:o(()=>a[8]||(a[8]=[n("p",{class:"text-uppercase text-body-1 main-text"},"Plasați comanda",-1)])),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r.items.length>0?(i(),u(c,{key:0,cols:"12",md:"6",lg:"4"},{default:o(()=>[l(g,{rounded:"0",tonal:""},{default:o(()=>[a[10]||(a[10]=n("p",{class:"text-h6 main-text py-3 px-5"},"Produsele",-1)),l(b,{thickness:1,opacity:"100"}),l(D,null,{default:o(()=>[(i(!0),j(A,null,z(r.items.slice(0,5),t=>(i(),u(x,{key:t.product.id},{default:o(()=>[n("div",W,[n("div",X,[n("div",null,[l(O,{class:"mr-3",src:t.product.image_src,height:"90",width:"90",cover:""},null,8,["src"])]),n("div",null,[n("p",Y,p(t.product.name),1),n("p",Z,p(t.quantity+" BUC"),1)])]),n("p",$,p((t.product.price*t.quantity).toFixed(2))+" RON ",1)])]),_:2},1024))),128)),r.items.length>5?(i(),u(x,{key:0},{default:o(()=>[n("p",ee,"Și alte "+p(r.items.length-5)+" produse",1)]),_:1})):_("",!0)]),_:1}),l(b,{thickness:1,opacity:"100"}),n("div",se,[n("div",ae,[a[9]||(a[9]=n("p",{class:"text-h6 main-text"},"Preț total",-1)),n("p",le,p(C.value)+" RON",1)])])]),_:1})]),_:1})):_("",!0)]),_:1})):(i(),u(f,{key:1,class:"justify-center"},{default:o(()=>[l(c,{cols:"12",sm:"8"},{default:o(()=>[l(g,{class:"section-separator text-center py-14",rounded:"0"},{default:o(()=>[a[12]||(a[12]=n("p",{class:"text-h5 pb-8"},"Coșul este gol",-1)),l(e(E),{href:r.route("product.index")},{default:o(()=>[l(V,{size:"large"},{default:o(()=>a[11]||(a[11]=[n("p",{class:"text-body-1 main-text"},"Continuă cumpărăturile",-1)])),_:1})]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))]),_:1})]),_:1}))}});export{ue as default};
