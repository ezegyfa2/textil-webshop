import{M as Q}from"./MainLayout-DI_McI5I.js";import{I as q}from"./ImageBox-DI8FnqKd.js";import{b as K}from"./AddNotification-NyjqDbEZ.js";import{d as T,n as G,a1 as H,r as o,q as D,w as z,s as L,a2 as J,o as u,c as V,b as a,e as l,h as O,D as _,Q as U,P as F,g as S,k as r,m as I,t as c,a3 as W,V as A,f as N,u as h,l as X,R as Y,a5 as Z,a4 as ee,i as R,B as ae,aa as le,ab as P,S as te,K as j,$ as B}from"./app-CB06vJSy.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{m as oe,d as E,f as re}from"./ValidationRules-DlUvOQ2l.js";import"./Notifications.vue_vue_type_style_index_0_lang-DOp5nevM.js";const de={class:"p-5 flex-grow-1 d-flex flex-column justify-space-between"},ne={class:"text-body-1 main-text mb-5"},ue={class:"d-flex justify-space-between align-center"},ie={key:0,class:"text-body-2 main-text"},me={key:1,class:"text-body-2 main-text"},pe={class:"d-flex align-center justify-center pa-4"},ce={class:"mx-2 text-caption"},ve=T({__name:"Table",props:G({filters:{}},{loading:{},loadingModifiers:{},errorMessages:{},errorMessagesModifiers:{}}),emits:["update:loading","update:errorMessages"],setup(C){const x=C,m=H(),f=o([]),d=o(1),i=o(1),b=o(10),s=D(C,"loading"),v=D(C,"errorMessages");function y(){if(d.value<i.value)++d.value,g();else throw new Error("Maximum page number exceeded")}function M(){if(d.value>0)--d.value,g();else throw new Error("Minimum page number exceeded")}z(()=>x.filters,()=>{g()},{deep:!0});const g=debounce(async()=>{s.value=!0,axios.get(route("product.fetch",k.value)).then(n=>{f.value=n.data.data,i.value=Math.ceil(n.data.meta.total/n.data.meta.per_page),m.value>i.value&&(m.value=i.value),v.value=[]}).catch(n=>{console.error(n),n.response.data.errors&&(v.value=n.response.data.errors),K(),f.value=[]}).finally(()=>{s.value=!1})},400),k=L(()=>Object.assign({page:d.value,per_page:b.value},x.filters));return J(g),(n,$)=>(u(),V(W,{items:f.value,"items-per-page":b.value},{default:a(({items:p})=>[l(S,{class:"pa-2",fluid:""},{default:a(()=>[l(O,{dense:""},{default:a(()=>[(u(!0),_(F,null,U(p,e=>(u(),V(A,{key:e.name,class:"pa-2",cols:"12",sm:"6",md:"3"},{default:a(()=>[l(N,{class:"product-box d-flex flex-column h-100",color:"white",rounded:"0"},{default:a(()=>[l(h(X),{href:n.route("product.show",{productType:e.raw.id})},{default:a(()=>[l(q,{width:"100%",height:"300",src:e.raw.image_src},{default:a(()=>[l(Y,{icon:"mdi-eye",color:"primary",size:"80"})]),_:2},1032,["src"])]),_:2},1032,["href"]),r("div",de,[r("p",ne,c(e.raw.name),1),r("div",ue,[r("div",null,[Array.isArray(e.raw.price)?(u(),_("div",ie,c(e.raw.price[0])+" RON - "+c(e.raw.price[1])+" RON ",1)):(u(),_("div",me,c(e.raw.price)+" RON",1))]),l(I,{size:"small",icon:"mdi-cart",flat:"",disabled:s.value,loading:s.value,onClick:t=>h(Z).visit(n.route("product.show",{productType:e.raw.id}))},null,8,["disabled","loading","onClick"])])])]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),footer:a(()=>[r("div",pe,[l(I,{disabled:d.value<=1,density:"comfortable",icon:"mdi-arrow-left",variant:"tonal",rounded:"0",onClick:M},null,8,["disabled"]),r("div",ce," Page "+c(d.value)+" of "+c(i.value),1),l(I,{disabled:d.value>=i.value,density:"comfortable",icon:"mdi-arrow-right",variant:"tonal",rounded:"0",onClick:y},null,8,["disabled"])])]),_:1},8,["items","items-per-page"]))}}),fe=se(ve,[["__scopeId","data-v-7564edf8"]]),ge={class:"text-body-2 main-text"},xe={class:"text-body-2 main-text"},be={class:"text-body-2 main-text"},ke=T({__name:"Index",props:{sizes:{},colors:{},categories:{}},setup(C){const x=o(""),m=o(null),f=o(null),d=o([]),i=o([]),b=o([]),s=o(!1),v=o({}),y=o(!1),M=o([0,1,2,3]),g=o({}),k=ee("filterForm"),n=L(()=>({search:x.value,from_price:m.value,to_price:f.value,category_ids:d.value,size_ids:i.value,color_ids:b.value}));z(n,p=>{k.value&&k.value.validate().then(e=>{e.valid&&(g.value=p)})});function $(p){return m.value===null||m.value===""?!0:re(p,m.value)}return(p,e)=>(u(),V(Q,null,{default:a(()=>[l(S,null,{default:a(()=>[l(O,null,{default:a(()=>[l(A,{class:"top-section-separator"},{default:a(()=>[l(N,{class:"pa-3 mt-6 mt-sm-0 d-flex"},{default:a(()=>[l(I,{class:"mr-3",icon:"mdi-filter",onClick:e[0]||(e[0]=t=>y.value=!y.value)}),l(R,{modelValue:x.value,"onUpdate:modelValue":e[1]||(e[1]=t=>x.value=t),density:"comfortable",placeholder:"Căutare","prepend-inner-icon":"mdi-magnify",style:{"max-width":"300px"},variant:"solo",clearable:"",rules:[h(oe)],disabled:s.value,loading:s.value,"error-messages":v.value.search},null,8,["modelValue","rules","disabled","loading","error-messages"])]),_:1}),l(N,null,{default:a(()=>[l(fe,{filters:g.value,loading:s.value,"onUpdate:loading":e[2]||(e[2]=t=>s.value=t),"error-messages":v.value,"onUpdate:errorMessages":e[3]||(e[3]=t=>v.value=t)},null,8,["filters","loading","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1}),l(te,{modelValue:y.value,"onUpdate:modelValue":e[10]||(e[10]=t=>y.value=t),class:"bg-surface top-0 h-100",elevation:"2"},{default:a(()=>[l(ae,{ref:"filterForm"},{default:a(()=>[l(le,{modelValue:M.value,"onUpdate:modelValue":e[9]||(e[9]=t=>M.value=t),multiple:""},{default:a(()=>[l(P,{rounded:"0"},{title:a(()=>e[11]||(e[11]=[r("p",{class:"text-h6 main-text"},"Prețuri",-1)])),text:a(()=>[l(R,{modelValue:m.value,"onUpdate:modelValue":e[4]||(e[4]=t=>m.value=t),placeholder:"De la preț",class:"text-body-2 main-text",type:"number",step:".01",density:"comfortable",variant:"solo",clearable:"",rules:[h(E)],disabled:s.value,loading:s.value,"error-messages":v.value.from_price},null,8,["modelValue","rules","disabled","loading","error-messages"]),l(R,{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=t=>f.value=t),placeholder:"La preț",class:"text-body-2 main-text",type:"number",step:".01",density:"comfortable",variant:"solo",clearable:"",rules:[$,h(E)],disabled:s.value,loading:s.value,"error-messages":v.value.to_price},null,8,["modelValue","rules","disabled","loading","error-messages"])]),_:1}),l(P,{rounded:"0"},{title:a(()=>e[12]||(e[12]=[r("p",{class:"text-h6 main-text"},"Categorii",-1)])),text:a(()=>[(u(!0),_(F,null,U(p.categories,t=>(u(),V(j,{key:t.name,class:"d-flex justify-end"},{default:a(()=>[l(B,{modelValue:d.value,"onUpdate:modelValue":e[6]||(e[6]=w=>d.value=w),value:t.id,density:"compact","hide-details":"",disabled:s.value},{prepend:a(()=>[r("p",ge,c(t.name),1)]),_:2},1032,["modelValue","value","disabled"])]),_:2},1024))),128))]),_:1}),l(P,{rounded:"0"},{title:a(()=>e[13]||(e[13]=[r("p",{class:"text-h6 main-text"},"Dimensiuni",-1)])),text:a(()=>[(u(!0),_(F,null,U(p.sizes,t=>(u(),V(j,{key:t.name,class:"d-flex justify-end"},{default:a(()=>[l(B,{modelValue:i.value,"onUpdate:modelValue":e[7]||(e[7]=w=>i.value=w),value:t.id,density:"compact","hide-details":"",disabled:s.value},{prepend:a(()=>[r("p",xe,c(t.name),1)]),_:2},1032,["modelValue","value","disabled"])]),_:2},1024))),128))]),_:1}),l(P,{rounded:"0"},{title:a(()=>e[14]||(e[14]=[r("p",{class:"text-h6 main-text"},"Culorile",-1)])),text:a(()=>[(u(!0),_(F,null,U(p.colors,t=>(u(),V(j,{key:t.name,class:"d-flex justify-end"},{default:a(()=>[l(B,{modelValue:b.value,"onUpdate:modelValue":e[8]||(e[8]=w=>b.value=w),value:t.id,density:"compact","hide-details":"",disabled:s.value},{prepend:a(()=>[r("p",be,c(t.name),1)]),_:2},1032,["modelValue","value","disabled"])]),_:2},1024))),128))]),_:1})]),_:1},8,["modelValue"])]),_:1},512)]),_:1},8,["modelValue"])]),_:1}))}});export{ke as default};
