import{M as S}from"./MainLayout-Br7jclMR.js";import{B as U}from"./BlogShortSection-CNpWaZ6q.js";import{b as D}from"./AddNotification-2Rtx2n4D.js";import{d as V,n as L,a1 as N,r as n,q as h,s as R,w,a2 as T,o as g,c as p,b as s,e,h as y,D as I,Q,P as j,g as C,k as b,m as _,t as x,a3 as q,V as k,a4 as $,f as M,i as z,u as A}from"./app-CQD9cFlp.js";import{m as G}from"./ValidationRules-DlUvOQ2l.js";import"./Notifications.vue_vue_type_style_index_0_lang-VHMnjnpo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ImageBox-B0a09f0R.js";const H={class:"d-flex align-center justify-center pa-4"},J={class:"mx-2 text-caption"},K=V({__name:"Table",props:L({search:{}},{loading:{},loadingModifiers:{},errorMessages:{},errorMessagesModifiers:{}}),emits:["update:loading","update:errorMessages"],setup(m){const i=m,u=N(),d=n([]),a=n(1),t=n(1),c=n(10),l=h(m,"loading"),r=h(m,"errorMessages");function B(){if(a.value<t.value)++a.value,f();else throw new Error("Maximum page number exceeded")}function P(){if(a.value>0)--a.value,f();else throw new Error("Minimum page number exceeded")}const f=debounce(()=>{l.value=!0,axios.get(route("blog.fetch",F.value)).then(o=>{d.value=o.data.data,t.value=Math.ceil(o.data.meta.total/o.data.meta.per_page),u.value>t.value&&(u.value=t.value),r.value=[]}).catch(o=>{console.error(o),o.response.data.errors&&(r.value=o.response.data.errors),D(),d.value=[]}).finally(()=>{l.value=!1})},300),F=R(()=>({page:a.value,per_page:c.value,search:i.search}));return w(()=>i.search,f),T(f),(o,O)=>(g(),p(q,{items:d.value,"items-per-page":c.value},{default:s(({items:E})=>[e(C,{class:"pa-2",fluid:""},{default:s(()=>[e(y,{dense:""},{default:s(()=>[(g(!0),I(j,null,Q(E,v=>(g(),p(k,{key:v.raw.title,class:"pa-2",cols:"12",sm:"6",md:"4"},{default:s(()=>[e(U,{blog:v.raw},null,8,["blog"])]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)]),footer:s(()=>[b("div",H,[e(_,{disabled:a.value<=1,density:"comfortable",icon:"mdi-arrow-left",variant:"tonal",rounded:"0",onClick:P},null,8,["disabled"]),b("div",J," Page "+x(a.value)+" of "+x(t.value),1),e(_,{disabled:a.value>=t.value,density:"comfortable",icon:"mdi-arrow-right",variant:"tonal",rounded:"0",onClick:B},null,8,["disabled"])])]),_:1},8,["items","items-per-page"]))}}),te=V({__name:"Index",setup(m){const i=n(null),u=n(!1),d=n({}),a=n(""),t=$("searchField");return w(i,c=>{t.value&&t.value.validate().then(l=>{l.length==0&&(a.value=c)})}),(c,l)=>(g(),p(S,null,{default:s(()=>[e(C,null,{default:s(()=>[e(y,null,{default:s(()=>[e(k,{class:"top-section-separator"},{default:s(()=>[e(M,{class:"pa-3 mt-6 mt-sm-0 d-flex"},{default:s(()=>[e(z,{ref:"searchField",modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=r=>i.value=r),density:"comfortable",placeholder:"CÄƒutare","prepend-inner-icon":"mdi-magnify",style:{"max-width":"300px"},variant:"solo",clearable:"",rules:[A(G)],disabled:u.value,loading:u.value,"error-messages":d.value.search},null,8,["modelValue","rules","disabled","loading","error-messages"])]),_:1}),e(M,null,{default:s(()=>[e(K,{search:a.value,loading:u.value,"onUpdate:loading":l[1]||(l[1]=r=>u.value=r),"error-messages":d.value,"onUpdate:errorMessages":l[2]||(l[2]=r=>d.value=r)},null,8,["search","loading","error-messages"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{te as default};
