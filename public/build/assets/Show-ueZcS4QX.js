import{d as E,r as b,s as x,o as d,D as m,e as a,v as W,c as B,b as s,P as C,Q as F,u as h,F as G,ac as Q,ad as $,_ as R,ae as A,Y as K,R as Y,x as H,a4 as J,h as V,V as c,B as Z,C as ee,k as l,t as i,af as L,K as M,ag as N,ah as D,m as k,i as te,y as se,g as P,f as ae,ai as le,a5 as oe}from"./app-CQD9cFlp.js";import{M as ie}from"./MainLayout-Br7jclMR.js";import{I as re}from"./ImageBox-B0a09f0R.js";import{r as j,f as ne}from"./ValidationRules-DlUvOQ2l.js";import{d as X,a as de}from"./Helpers-BS7P6LL9.js";import{b as T}from"./AddNotification-2Rtx2n4D.js";import"./Notifications.vue_vue_type_style_index_0_lang-VHMnjnpo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ue=E({__name:"ImageSection",props:{image_sources:{}},setup(w){const f=w;let r=b(0);const u=x(()=>f.image_sources.length==0?"":f.image_sources[r.value]);return(n,_)=>(d(),m(C,null,[a(W,{width:"100%",height:"600",src:u.value,cover:""},null,8,["src"]),n.image_sources.length>1?(d(),B($,{key:0,class:"image-container-sheet"},{default:s(()=>[a(Q,{modelValue:h(r),"onUpdate:modelValue":_[0]||(_[0]=g=>G(r)?r.value=g:r=g),class:"w-100","selected-class":"bg-success",mandatory:"","show-arrows":""},{default:s(()=>[(d(!0),m(C,null,F(n.image_sources,g=>(d(),B(A,null,{default:s(({isSelected:v,toggle:S,selectedClass:z})=>[a(re,{class:K(["mx-4","image-box",z]),height:"150",width:"150",src:g,onClick:S},{default:s(()=>[a(Y,{color:"primary",size:"x-large"},{default:s(()=>_[1]||(_[1]=[H(" mdi-eye ")])),_:1})]),_:2},1032,["class","src","onClick"])]),_:2},1024))),256))]),_:1},8,["modelValue"])]),_:1})):R("",!0)],64))}}),ce={class:"text-h5 main-text mb-16"},pe={class:"text-body-1 main-text"},me={class:"text-body-1 main-text"},fe={class:"quantity-field d-flex align-start justify-between mb-5 w-100"},_e={class:"d-flex justify-between mb-2"},ge={class:"text-h6 main-text"},xe={class:"text-body-1"},be={class:"text-body-1"},he={class:"text-body-1"},ve={class:"d-flex justify-space-between align-end"},ye={key:0,class:"text-body-1"},Ve={class:"text-end"},Ce={class:"d-flex justify-space-between align-end"},we={key:0,class:"text-body-1"},Se={class:"text-end"},ze={class:"text-body-1 main-text"},Ie={class:"text-body-1 main-text"},ke={class:"text-body-1 main-text"},je={class:"text-body-1 main-text"},Te={class:"text-body-1 main-text"},Be={class:"text-body-1 main-text"},Fe={class:"text-body-1 main-text"},Re={class:"text-body-1 main-text"},Le={class:"text-body-1 main-text"},Oe=E({__name:"Show",props:{name:{},gram_per_m2:{},brand:{},category:{},image_sources:{},fabric_properties:{},cut_properties:{},products:{},sizes:{}},setup(w){const f=w,r=b(null),u=b(null),n=b(1),_=J("addToCartForm"),g=x(()=>Object.entries(f.sizes).map(o=>Object.assign({type:o[0]},o[1]))),v=b([]),S=x(()=>{const t=f.products.filter(e=>{const p=e.colors.map(I=>I.id);return!(r.value&&!p.includes(r.value))}).map(e=>e.sizes).flat();return X(t,"id")}),z=x(()=>{const t=f.products.filter(e=>{const p=e.sizes.map(I=>I.id);return!(u.value&&!p.includes(u.value))}).map(e=>e.colors).flat();return X(t,"id")}),U=x(()=>{if(r.value&&u.value&&y.value.length!=1)throw T(),new Error("Invalid choosed product count");{const o=de(y.value.map(t=>t.price));return o.length==1?(o[0]*n.value).toFixed(2):null}}),y=x(()=>f.products.filter(o=>{const t=o.sizes.map(e=>e.id);if(u.value&&!t.includes(u.value))return!1;{const e=o.colors.map(p=>p.id);return!(r.value&&!e.includes(r.value))}}));async function q(){const{valid:o}=await _.value.validate();if(o)if(y.value.length==1)oe.post(route("cart.add-to-cart"),{product_id:y.value[0].id,quantity:n.value,size_id:u.value,color_id:r.value},{onError:t=>{T(),v.value=t,console.log(t)}});else throw T(),new Error("Invalid choosed product count")}function O(){n.value>1&&--n.value}return(o,t)=>(d(),B(ie,null,{default:s(()=>[a(P,{class:"product-show-container"},{default:s(()=>[a(V,null,{default:s(()=>[a(c,{cols:"12",sm:"6",lg:"8"},{default:s(()=>[a(ue,{image_sources:o.image_sources},null,8,["image_sources"])]),_:1}),a(c,{class:"pl-md-15",cols:"12",sm:"6",lg:"4"},{default:s(()=>[a(Z,{ref:"addToCartForm",onSubmit:ee(q,["prevent"])},{default:s(()=>[l("h1",ce,i(o.name),1),a(L,{modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),items:S.value,"item-title":"name","item-value":"id",class:"text-body-1 main-text",label:"Dimensiune",placeholder:"Dimensiune",rules:[h(j)],"error-messages":v.value.size_id},{item:s(({props:e})=>[a(M,N(D(e)),{title:s(({title:p})=>[l("p",pe,i(p),1)]),_:2},1040)]),_:1},8,["modelValue","items","rules","error-messages"]),a(L,{modelValue:r.value,"onUpdate:modelValue":t[1]||(t[1]=e=>r.value=e),items:z.value,"item-title":"name","item-value":"id",class:"text-body-1 main-text",label:"Tipul",placeholder:"Selecteaza tipul",rules:[h(j)],"error-messages":v.value.color_id},{item:s(({props:e})=>[a(M,N(D(e)),{title:s(({title:p})=>[l("p",me,i(p),1)]),_:2},1040)]),_:1},8,["modelValue","items","rules","error-messages"]),l("div",fe,[a(k,{width:"55",height:"55",disabled:n.value<=1,onClick:O},{default:s(()=>t[5]||(t[5]=[l("p",{class:"text-h4 main-text"},"-",-1)])),_:1},8,["disabled"]),a(te,{modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=e=>n.value=e),onChange:t[3]||(t[3]=e=>o.updateQuantity(o.item)),type:"number",rules:[e=>h(ne)(e,1),h(j)],class:"text-h6 main-text",rounded:"0","hide-spin-buttons":"","center-affix":""},null,8,["modelValue","rules"]),a(k,{width:"55",height:"55",onClick:t[4]||(t[4]=e=>++n.value)},{default:s(()=>t[6]||(t[6]=[l("p",{class:"text-h4 main-text"},"+",-1)])),_:1})]),l("div",_e,[t[7]||(t[7]=l("p",{class:"text-h6 main-text"},"Preț total:",-1)),l("p",ge,i(U.value)+" RON",1)]),a(k,{width:"100%",height:"55",type:"submit"},{default:s(()=>t[8]||(t[8]=[l("p",{class:"text-body-1 text-uppercase main-text"},"Adaugă în coș",-1)])),_:1})]),_:1},512)]),_:1})]),_:1}),a(V,{class:"mt-16 mb-5"},{default:s(()=>[a(c,null,{default:s(()=>[t[9]||(t[9]=l("h2",{class:"text-h4 main-text text-center mb-8"},"Caracteristicile technice",-1)),a(se,{thickness:1,opacity:"100"})]),_:1})]),_:1}),a(V,null,{default:s(()=>[a(c,{cols:"12",md:"6",lg:"4"},{default:s(()=>[a(P,{class:"pt-0"},{default:s(()=>[a(V,null,{default:s(()=>[a(c,{class:"d-flex justify-space-between align-end pb-0",cols:"12"},{default:s(()=>[t[10]||(t[10]=l("p",{class:"text-h6 main-text"},"Marca",-1)),l("p",xe,i(o.brand),1)]),_:1}),a(c,{class:"d-flex justify-space-between align-end pb-0",cols:"12"},{default:s(()=>[t[11]||(t[11]=l("p",{class:"text-h6 main-text"},"Categorie",-1)),l("p",be,i(o.category),1)]),_:1}),a(c,{class:"d-flex justify-space-between align-end pb-0",cols:"12"},{default:s(()=>[t[12]||(t[12]=l("p",{class:"text-h6 main-text"},"g/m2",-1)),l("p",he,i(o.gram_per_m2),1)]),_:1}),a(c,{class:"pb-0",cols:"12"},{default:s(()=>[l("div",ve,[t[13]||(t[13]=l("p",{class:"text-h6 main-text"},"Material",-1)),o.fabric_properties.length>0?(d(),m("p",ye,i(o.fabric_properties[0]),1)):R("",!0)]),(d(!0),m(C,null,F(o.fabric_properties.length-1,e=>(d(),m("p",Ve,i(o.fabric_properties[e]),1))),256))]),_:1}),a(c,{class:"pb-0",cols:"12"},{default:s(()=>[l("div",Ce,[t[14]||(t[14]=l("p",{class:"text-h6 main-text"},"Taietura",-1)),o.cut_properties.length>0?(d(),m("p",we,i(o.cut_properties[0]),1)):R("",!0)]),(d(!0),m(C,null,F(o.cut_properties.length-1,e=>(d(),m("p",Se,i(o.cut_properties[e]),1))),256))]),_:1})]),_:1})]),_:1})]),_:1}),a(c,{cols:"12",md:"6",lg:"8"},{default:s(()=>[a(ae,{rounded:"0"},{default:s(()=>[a(le,{items:g.value,"hide-default-footer":"","disable-sort":""},{"header.type":s(()=>t[15]||(t[15]=[])),"header.XXS":s(({column:e})=>[l("p",ze,i(e.title),1)]),"header.XS":s(({column:e})=>[l("p",Ie,i(e.title),1)]),"header.S":s(({column:e})=>[l("p",ke,i(e.title),1)]),"header.M":s(({column:e})=>[l("p",je,i(e.title),1)]),"header.L":s(({column:e})=>[l("p",Te,i(e.title),1)]),"header.XL":s(({column:e})=>[l("p",Be,i(e.title),1)]),"header.2XL":s(({column:e})=>[l("p",Fe,i(e.title),1)]),"header.3XL":s(({column:e})=>[l("p",Re,i(e.title),1)]),"item.type":s(({item:e})=>[l("p",Le,i(e.type),1)]),_:1},8,["items"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{Oe as default};
